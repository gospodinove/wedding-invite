<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Wedding Invitation</title>
        <link rel="stylesheet" href="./styles.css" />
    </head>

    <body>
        <div class="envelope-container">
            <div class="envelope" id="envelope">
                <div class="back">
                    <div class="flap">
                        <div class="flap-front">
                            <img src="./assets/Flap.webp" alt="" />
                        </div>
                        <div class="flap-inside">
                            <img src="./assets/Flap Inside.webp" alt="" />
                        </div>
                    </div>

                    <div class="back-cutout">
                        <img src="./assets/Back Cutout.webp" alt="" />
                    </div>
                    <div class="back-background">
                        <img src="./assets/Lining.webp" alt="" />
                    </div>

                    <div class="invitation">
                        <img src="./assets/Invitation.webp" alt="Invitation" />
                    </div>
                </div>

                <div class="front">
                    <span id="greeting"></span>
                    <img src="./assets/Front.webp" alt="Envelope" />
                </div>
            </div>
        </div>

        <script>
            const envelope = document.getElementById("envelope");
            const flap = document.querySelector(".flap");
            const invitation = document.querySelector(".invitation");
            const backCutout = document.querySelector(".back-cutout");

            let isFlipped = false;

            envelope.addEventListener("click", () => {
                if (!isFlipped) {
                    envelope.classList.add("show-back");
                    envelope.style.cursor = "default";

                    isFlipped = true;

                    setTimeout(() => {
                        flap.style.opacity = "1";
                        setTimeout(() => {
                            envelope.classList.add("open");
                            setTimeout(() => {
                                flap.style.zIndex = "1";

                                setTimeout(() => {
                                    backCutout.style.zIndex = "2";
                                }, 500);

                                invitation.classList.add("show");
                            }, 500);
                        }, 500);
                    }, 200);
                }
            });
        </script>

        <script>
            const urlParams = new URLSearchParams(window.location.search);

            const names = urlParams.get("names") ?? "";
            const param2 = urlParams.get("hasPlusOne");

            const outputElement = document.querySelector("#greeting");
            outputElement.textContent = `Hello ${names}`;
        </script>
    </body>
</html>
